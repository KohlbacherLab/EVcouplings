language: python
python:
- '3.5'
- '3.6'
before_install:
- sudo apt-get update
- if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
  -O miniconda.sh; else wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; fi
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda info -a
- conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION numpy scipy numba
  pandas matplotlib
- source activate test-environment
install:
- python setup.py sdist --formats=zip -k
- find ./dist -iname "*.zip" -print0 | xargs -0 pip install
script:
- python -m unittest discover -s test -p "Test*.py"
deploy:
  provider: pypi
  user: debbiemarkslab
  password:
    secure: sgND7tkfN3MDI/lxfcLVl6lekFb0GqxEQZ1cixL/iQGRb7M/pZiPMegWGhBQ3pMCaR7peXCgiHbUIsuP1muLsHTKzsFneeRaY2tBwd0+9y0WLDP/aDEn4lt/CJf7at4HSbvQ8x8DTCjcnBGC7SeUkuJAeJRrnWnngDVlWuw93DVTiOoWSiE9HhVzo3H1wmS8AOjDzebxeHSi5kOdJ0QBW2QJtGxrVrQT0XzW37RdfogC6BoOi3HG620h49TRWAQurgtnprNGQ4RqP6vx9KvzL3HWbuDmI+MLRU2ZvIV86xE7sDMKy1nRqBmrRRC2KAuQB+UWIYuuprLoW4wuibcG/uiQOBOhjeOyUu3fL8Nb0K2+p4YySiTbASqFrWqfHPD83EwfPXHw+aNeuHJyu4h7ogzBYjZsz+nY8AhBl9v7CzNT6VuYQcnJMBt9Ca9Ab9Ats+9yVinmFD6UvFfKfWUjyn7pbWHtIxT1iLSIq9faD7bW6uSAainMGB2KlxgJp5O9ePM0/LBJiGVYyYZphLyWPABHGasfMcxn6LG2c9mWICFpelB5B0P6aSfvRFElzYTcd2hLMyLYdscVOw8NSFYkM9QzGH9Py8ptsA3l34BUeCA0YsUj4PZL7W8wuwOXBhypIkmnHbD8rN0DY1vaVTvjbII/KUbEX0FwaiNRLKlW7Ms=
  on:
    tags: true
